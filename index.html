<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr. Gogo Cafe | Home</title>

    <style>
        body {
            background-color: black;
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
        }

        nav {
            background-color: white; /* Added background color to nav */
            padding: 10px 0; /* Added padding for spacing */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Added shadow for effect */
        }

        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 3px;
            justify-content: center; /* Centered the nav items */
            align-items: center;
        }

        nav li {
            margin: 5px 10px; /* Adjusted margin for better spacing */
        }

        nav a {
            color: black;
            background-color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s, color 0.3s;
            white-space: nowrap; /* Prevents text from wrapping inside the button */
        }

        nav a:hover,
        nav a.active {
            background-color: #333;
            color: white;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            text-align: center;
            max-width: 90%; /* Adjusted maximum width */
        }

        .popular-dishes-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            text-align: center;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .popular-dishes-slideshow {
            max-width: 100%;
            margin: 0 auto;
            position: relative; /* Added for centering */
            overflow: hidden; /* Ensure images don't overflow */
        }

        .popular-dish {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        .popular-dish.active {
            display: block;
        }

        .popular-dish img {
            max-width: 100%; /* Adjust image width */
            max-height: 200px; /* Adjust image height */
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease-in-out;
        }

        .popular-dish img:hover {
            transform: scale(1.05);
        }

        .menu-button {
            background-color: #333;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s, color 0.3s;
            margin-top: 20px;
            display: inline-block;
        }

        .menu-button:hover {
            background-color: #666;
        }

        .menu-icon {
            vertical-align: middle;
            margin-left: 5px;
            max-height: 20px;
        }

        footer {
        text-align: center;
        padding: 0px 0; /* Reduced padding vertically */
        background-color: black; /* Adjusted background color */
        color: white;
        position: fixed;
        bottom: 0;
        width: 100%; /* Adjusted width to fit the screen horizontally */
        font-size: 12px; /* Reduced font size */
        z-index: 9999; /* Ensure it's above the popup */
    }

    footer img {
        width: 60px;
        vertical-align: middle;
    }

        @keyframes typing {
            from {
                width: 0;
            }
            to {
                width: 100%;
            }
        }

        @keyframes fade-in {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        hr {
            color: white;
            margin: 20px;
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .container {
                max-width: 90%;
            }
            
            .popular-dishes-slideshow img {
                max-width: 90%; /* Adjust image width for smaller screens */
            }

            nav ul {
                flex-direction: row; /* Stack nav items vertically on small screens */
            }

            nav li {
                margin: 5px 0; /* Adjust margin for better spacing on small screens */
            }
        }
    </style>
</head>
<body>
     
    <center><img src="gogo-cafe-white.png" width="150px"></center>
    <nav>
        <ul>
            <li><a href="index.html" class="active">Home</a></li>
            <li><a href="menu.html">Menu</a></li>
            <li><a href="Specials.html">Specials</a></li>
            <li><a href="about_us.html">About</a></li>
        </ul>
    </nav>
    <hr>
    
    <div class="container">
        <div class="text-container">
            <p id="typewriter-text"></p>
        </div>

        <div class="popular-dishes-container">
            <div class="popular-dishes-slideshow">
                <div class="popular-dish active">
                    <img src="Menu Food images/Tasty Kulhad Pizza.jpeg" alt="Popular Dish 1">
                </div>
                <div class="popular-dish">
                    <img src="Menu Food images/Veg Pizza.jpeg" alt="Popular Dish 2">
                </div>
                <div class="popular-dish">
                    <img src="Menu Food images/Panner Pizza.jpeg" alt="Popular Dish 3">
                </div>
            </div>
        </div>

        <a href="menu.html" class="menu-button">Menu <img src="Menu Food images/menu icon.png" alt="Menu Icon" class="menu-icon"></a>
    </div>
    <hr>
<footer>
    <p>Powered by <a href="https://github.com/Vighneshshetty002"><img src="VS Tech.png"></a></p>
</footer>
         
    <script>
        // Initialize EmailJS
emailjs.init("YOUR_EMAILJS_USER_ID");

const searchInput = document.getElementById('searchInput');
const statusBar = document.getElementById('statusBar');
const popupOverlay = document.getElementById('popupOverlay');
const popup = document.getElementById('popup');
const popupContent = document.getElementById('popupContent');
const popupTotal = document.getElementById('popupTotal');
const popupBtn = document.getElementById('popupBtn');
const welcomePopup = document.getElementById('welcomePopup');
const welcomeOverlay = document.getElementById('welcomeOverlay');
const nameInput = document.getElementById('nameInput');
const welcomeBtn = document.getElementById('welcomeBtn');
const containers = document.querySelectorAll('.container');

let cart = [];
let placeholderIndex = 0;
const placeholders = ['Search "Pizza"...', 'Search "Burger"...', 'Search "Fries"...', 'Search "Frankie"...', 'Search "Sandwich"...', 'Search "Chats"...', 'Search "Pasta"...', 'Search "Maggie"...', 'Search "Rice"...', 'Search "Mocktails"...', 'Search "Milk Shakes"...', 'Search "Beverages"...'];

// Show welcome popup
function showWelcomePopup() {
    welcomePopup.style.display = 'block';
    welcomeOverlay.style.display = 'block';
}

// Hide welcome popup and save name
function hideWelcomePopup() {
    const userName = nameInput.value;
    if (userName.trim() !== '') {
        localStorage.setItem('userName', userName);
        welcomePopup.style.display = 'none';
        welcomeOverlay.style.display = 'none';
    } else {
        alert('Please enter your name.');
    }
}

welcomeBtn.addEventListener('click', hideWelcomePopup);

// Show the popup on page load if the name is not already saved
window.onload = function () {
    if (!localStorage.getItem('userName')) {
        showWelcomePopup();
    }
};

// Change the placeholder text every few seconds
function changePlaceholder() {
    searchInput.placeholder = placeholders[placeholderIndex];
    placeholderIndex = (placeholderIndex + 1) % placeholders.length;
}
setInterval(changePlaceholder, 3000);

// Scroll to search input on focus
searchInput.addEventListener('focus', () => {
    window.scrollTo({ top: searchInput.offsetTop - 50, behavior: 'smooth' });
});

searchInput.addEventListener('input', filterMenu);

function filterMenu() {
    const query = searchInput.value.toLowerCase();
    containers.forEach(container => {
        const itemName = container.querySelector('.title').textContent.toLowerCase();
        if (itemName.includes(query)) {
            container.style.display = 'block';
        } else {
            container.style.display = 'none';
        }
    });
}

function showStatus(message) {
    statusBar.textContent = message;
    statusBar.style.display = 'block';
    setTimeout(() => {
        statusBar.style.display = 'none';
    }, 3000);
}

function orderItem(name, price) {
    const orderDetails = name;
    const totalPrice = price.toFixed(2);
    const orderDateTime = new Date().toLocaleString();
    emailjs.send("service_8y2ru2g", "template_yrk4mbd", {
        table_number: getTableNumber(),
        order_details: orderDetails,
        total_price: totalPrice,
        order_date_time: orderDateTime
    })
    .then(function(response) {
        console.log('SUCCESS!', response.status, response.text);
        showStatus('Order placed successfully!');
    }, function(error) {
        console.log('FAILED...', error);
        showStatus('Failed to place order. Please try again.');
    });
}

function addToCart(name, price) {
    const addButton = document.getElementById(`addButton-${name}`);
    addButton.outerHTML = `
        <div class="quantity-controls">
            <button onclick="decrementQuantity('${name}', ${price}, this)">-</button>
            <span>1</span>
            <button onclick="incrementQuantity('${name}', ${price}, this)">+</button>
        </div>
    `;
    const item = { name, price, quantity: 1 };
    cart.push(item);
    updateCartDisplay();
    showStatus('Item added to cart.');
}

function incrementQuantity(itemName, itemPrice, element) {
    const quantityElement = element.previousElementSibling;
    let quantity = parseInt(quantityElement.textContent);
    quantity++;
    quantityElement.textContent = quantity;
    updateCartItem(itemName, itemPrice);
}

function decrementQuantity(itemName, itemPrice, element) {
    const quantityElement = element.nextElementSibling;
    let quantity = parseInt(quantityElement.textContent);
    if (quantity > 1) {
        quantity--;
        quantityElement.textContent = quantity;
        updateCartItem(itemName, -itemPrice);
    } else {
        const parent = element.parentElement;
        parent.outerHTML = `<button id="addButton-${itemName}" onclick="addToCart('${itemName}', ${itemPrice})">Add +</button>`;
        removeFromCart(itemName);
    }
}

function updateCartItem(itemName, priceChange) {
    const item = cart.find(item => item.name === itemName);
    if (item) {
        item.quantity += priceChange > 0 ? 1 : -1;
        item.price += priceChange;
        updateCartDisplay();
    }
}

function removeFromCart(itemName) {
    const itemIndex = cart.findIndex(item => item.name === itemName);
    if (itemIndex > -1) {
        cart.splice(itemIndex, 1);
        showStatus('Item removed from cart.');
        updateCartDisplay();
    }
}

function updateCartDisplay() {
    popupContent.innerHTML = '';
    let total = 0;
    cart.forEach(item => {
        const itemDiv = document.createElement('div');
        itemDiv.classList.add('popup-item');
        itemDiv.innerHTML = `
            <span>${item.name} - ${item.quantity} x ${item.price / item.quantity} = ${item.price.toFixed(2)}</span>
        `;
        popupContent.appendChild(itemDiv);
        total += item.price;
    });
    popupTotal.textContent = `Total: ${total.toFixed(2)}`;
    popupBtn.style.display = cart.length > 0 ? 'block' : 'none';
}

function togglePopup() {
    const isVisible = popup.style.display === 'block';
    popup.style.display = isVisible ? 'none' : 'block';
    popupOverlay.style.display = isVisible ? 'none' : 'block';
}

function closePopup() {
    popup.style.display = 'none';
    popupOverlay.style.display = 'none';
}

function sendOrder() {
    const total = cart.reduce((sum, item) => sum + item.price, 0);
    const orderDetails = cart.map(item => `${item.name} - ${item.quantity} x ${item.price / item.quantity}`).join('<br/>');
    const orderDateTime = new Date().toLocaleString();
    emailjs.send("service_8y2ru2g", "template_yrk4mbd", {
        table_number: getTableNumber(),
        order_details: orderDetails,
        total_price: total.toFixed(2),
        order_date_time: orderDateTime
    })
    .then(function(response) {
        console.log('SUCCESS!', response.status, response.text);
        showStatus('Order placed successfully!');
        cart = [];
        updateCartDisplay();
        closePopup();
    }, function(error) {
        console.log('FAILED...', error);
        showStatus('Failed to place order. Please try again.');
    });
}

function getTableNumber() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('table') || 'unknown';
}
    </script>
</body>
</html>
